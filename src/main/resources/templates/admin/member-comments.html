<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>댓글 관리 - 버디의 홈페이지</title>

    <link rel="stylesheet" th:href="@{/css/common.css}">
</head>
<body>
<div class="login-area">
    <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post">
        <span sec:authentication="principal.username">admin</span>
        <button type="submit">로그아웃</button>
    </form>
</div>

<header id="container">
    <h1>관리자 - 댓글 관리</h1>
</header>

<nav>
    <ul>
        <li><a th:href="@{/home}">홈</a></li>
        <li><a th:href="@{/admin/members}">회원 관리</a></li>
        <li><a th:href="@{/admin/comments}">댓글 관리</a></li>
    </ul>
</nav>

<main style="max-width: 900px; margin: 40px auto; background: rgba(255,255,255,0.9); padding: 20px; border-radius: 12px;">
    <h2>댓글 목록</h2>

    <table style="width: 100%; border-collapse: collapse;">
        <thead>
        <tr>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">ID</th>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">페이지</th>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">작성자</th>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">내용</th>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">작성일</th>
            <th style="border-bottom: 2px solid #ccc; padding: 8px;">관리</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="comment : ${comments}">
            <td th:text="${comment.id}" style="border-bottom: 1px solid #eee; padding: 8px;">1</td>
            <td th:text="${comment.pageId}" style="border-bottom: 1px solid #eee; padding: 8px;">info</td>
            <td th:text="${comment.author.name}" style="border-bottom: 1px solid #eee; padding: 8px;">홍길동</td>
            <td th:text="${comment.content}" style="border-bottom: 1px solid #eee; padding: 8px;">내용</td>
            <td th:text="${#temporals.format(comment.createdAt, 'yyyy-MM-dd HH:mm')}"
                style="border-bottom: 1px solid #eee; padding: 8px;">2024-01-01 12:00</td>
            <td style="border-bottom: 1px solid #eee; padding: 8px;">
                <form th:action="@{'/admin/comments/' + ${comment.id} + '/delete'}"
                      method="post"
                      onsubmit="return confirm('해당 댓글을 삭제하시겠습니까?');">
                    <button type="submit">삭제</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
</main>

<footer>
    <p id="footer-year">&copy; <span id="current-year"></span> My Homepage. All rights reserved.</p>
</footer>

<script>
    // JavaScript로 년도 쉽게 업데이트하기
    document.getElementById('current-year').textContent = new Date().getFullYear();
</script>
</body>
</html>
