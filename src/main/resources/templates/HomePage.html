<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>버디의 홈페이지</title>
    <script>
        // 개 격언 목록
        var dogQuotes = [
            "개는 최고의 친구입니다.",
            "개가 있으면 집이 진정된 집이 됩니다.",
            "개는 우리의 충실한 동반자입니다.",
            "개는 항상 우리를 기쁘게 만듭니다."
        ];

        // 랜덤 출력 함수
        function displayRandomQuote() {
            var randomIndex = Math.floor(Math.random() * dogQuotes.length);
            document.getElementById('quote-text').textContent = dogQuotes[randomIndex];
        }

        // 페이지가 로드하면 함수 활성화
        window.onload = function() {
            displayRandomQuote();
        };
    </script>

    <link rel="stylesheet" th:href="@{/css/common.css}">
</head>
<body>
<div class="login-area">
    <!-- 로그인 안 한 상태 -->
    <form sec:authorize="!isAuthenticated()" th:action="@{/login}" method="get">
        <button type="submit">로그인</button>
    </form>

    <!-- 로그인 한 상태 -->
    <form sec:authorize="isAuthenticated()"
          th:action="@{/logout}" method="post">
        <span sec:authentication="principal.username">user</span>
        <button type="submit">로그아웃</button>
    </form>
</div>

<header id="container">
    <h1>버디의 홈페이지</h1>
</header>

<nav>
    <ul>
        <li><a th:href="@{/home}">홈</a></li>
        <li><a th:href="@{/photos}">사진</a></li>
        <li><a th:href="@{/videos}">동영상</a></li>
        <li><a th:href="@{/info}">정보</a></li>
        <!-- ✅ 로그인한 사용자에게만 마이페이지 표시 -->
        <li sec:authorize="isAuthenticated()">
            <a th:href="@{/mypage}">마이페이지</a>
        </li>
        <!-- ✅ 관리자에게만 회원 관리 표시 -->
        <li sec:authorize="hasRole('ADMIN')">
            <a th:href="@{/admin/members}">회원 관리</a>
        </li>
    </ul>
</nav>

<!-- 빨간 글씨 숨김 처리는 유지 -->
<main style="color: transparent;">
    <h2>버디의 홈페이지</h2>
    <p>이곳은 저희 집의 사랑스러운 강아지인 버디의 홈페이지 입니다.</p>
    <p id="current-date"></p>
</main>

<div class="content-card">
    <h2>🐕 버디의 홈페이지에 오신 걸 환영합니다!</h2>
    <p>이곳은 저희 집의 사랑스러운 강아지인 버디의 홈페이지입니다.</p>
    <p>버디와 함께한 행복한 순간들을 공유합니다.</p>
</div>

<div id="quote-container">
    <h3>💭 오늘의 명언</h3>
    <p id="quote-text"></p>
</div>

<footer>
    <p id="footer-year">&copy; <span id="current-year"></span> My Homepage. All rights reserved.</p>
</footer>

<script>
    // JavaScript로 년도 쉽게 업데이트하기
    document.getElementById('current-year').textContent = new Date().getFullYear();
</script>
</body>
</html>